if("function"!==typeof(String.prototype.trim)){String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}}(function(a){jQuery.fn.infinityScroll=function(b){var h,i,f,o,l,j,d,g,c,m,e,k;f="Infinity Scroll";i=function(q,p){if(typeof console=="object"){console.log("!\n["+f+" - "+(p||"Erro")+"] "+q)}};h={lastShelf:">div:last",elemLoading:'<div id="scrollLoading">Carregando ... </div>',searchUrl:null,returnToTop:a('<div id="returnToTop"><a href="#"><span class="text">voltar ao</span><span class="text2">TOPO</span><span class="arrowToTop"></span></a></div>'),callback:function(){},getShelfHeight:function(){return(l.scrollTop()+l.height())},paginate:null,insertContent:function(q,p){q.after(p)}};o=jQuery.extend({},h,b);l=jQuery(this);j=jQuery("");if(l.length<1){return l}if(l.length>1){i("Identifiquei que a seletor informado ("+l.selector+") retornou "+l.length+" elementos.\n Como correto, selecionado o primeiro com o id: #"+(l.filter("[id^=ResultItems]:first").attr("id")||"!Not Found"),"Aviso");l=l.filter("[id^=ResultItems]:first")}if(!l.filter("[id^=ResultItems]").length){i("Certifique-se que esta selecionando o elemento correto.\n O plugin espera que o elemento seja o que cont�m o id: #"+jQuery("div[id^=ResultItems]").attr("id")||"!Not Found","Aviso")}if(l.parent().filter("[id^=ResultItems]").length){i("Identifiquei que o seletor pai do elemento que voc� informou � o #"+(jQuery("div[id^=ResultItems]").attr("id")||"!Not Found")+".\n Como forma de corrigir esse problema de sele��o de elemento, assumirei prateleira correta.","Aviso");l=l.parent()}a("body").append(o.returnToTop);d=jQuery(window);g=jQuery(document);c=a(o.returnToTop);m=jQuery(o.elemLoading);e=true;k=2;var n={scrollToTop:function(){var p=d.height();d.bind("resize",function(){p=d.height()});d.bind("scroll",function(){if(g.scrollTop()>(p)){c.stop(true).fadeTo(300,1,function(){c.show()})}else{c.stop(true).fadeTo(300,0,function(){c.hide()})}});c.find("a").bind("click",function(){jQuery("html,body").animate({scrollTop:0},"slow");return false})},getSearchUrl:function(){var p,q,s,r;jQuery("script:not([src])").each(function(){q=jQuery(this)[0].innerHTML;s=/\/buscapagina\?.+&PageNumber=/i;r=/\/paginaprateleira\?.+PageNumber=/i;if(q.search(/\/buscapagina\?/i)>-1){p=s.exec(q);return false}else{if(q.search(/\/paginaprateleira\?/i)>-1){p=r.exec(q);return false}}});if(typeof(p)!=="undefined"&&typeof(p[0])!=="undefined"){if(p[0].search(/\/paginaprateleira\?/i)>-1){return p[0].replace(/paginaprateleira/,"buscapagina")}else{return p[0]}}else{i("N�o foi poss�vel localizar a url de busca da p�gina.\n Tente adicionar o .js ao final da p�gina. \n[M�todo: getSearchUrl]");return""}},infinityScroll:function(){var r,p,u,q,t,s;u=(null!==o.searchUrl)?o.searchUrl:n.getSearchUrl();q=true;p=9999999999999;r=jQuery(".pager[id*=PagerTop]:first").attr("id")||"";if(""===r){i("N�o foi poss�vel localizar o div.pages contendo o atributo id*=PagerTop","Alerta")}else{p=window["pagecount_"+r.split("_").pop()];if("undefined"===typeof p){for(s in window){if(/pagecount_[0-9]+/.test(s)){p=window[s];break}}}if("undefined"===typeof p){p=9999999999999}}t=function(){if(!q){return}var v=l.find(o.lastShelf);if(v.length<1){i("�ltima Prateleira/Vitrine n�o encontrada \n ("+v.selector+")");return false}v.after(m);q=false;jQuery.ajax({url:u+k,success:function(w){if(w.trim().length<1){e=false;i("N�o existem mais resultados a partir da p�gina: "+k,"Aviso")}else{o.insertContent(v,w)}q=true;m.remove()},error:function(){i("Houve um erro na requisi��o Ajax de uma nova p�gina.")},complete:function(w,x){o.callback()}});k++};if(typeof o.paginate==="function"){o.paginate(function(){if(k<=p&&e){t()}})}else{d.bind("scroll",function(){if(k<=p&&e){if((d.scrollTop()+d.height())>=(o.getShelfHeight())){t()}}else{return false}})}}};n.scrollToTop();n.infinityScroll();return l}})(jQuery);